<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
<title>Insert title here</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=8,IE=9,IE=10">
<meta http-equiv="Expires" content="0">
<meta http-equiv="Cache-Control" content="no-cache">
<meta http-equiv="Cache-Control" content="no-store">
<script src="../static/jquery/jquery-1.8.3.min.js" type="text/javascript"></script>
<link href="../static/bootstrap/2.3.1/css_cerulean/bootstrap.min.css"
	type="text/css" rel="stylesheet">
<link href="../static/bootstrap/2.3.1/awesome/font-awesome.min.css"
	type="text/css" rel="stylesheet">
<link href="../static/bootstrap/2.3.1/awesome/font-awesome.min.css"
	type="text/css" rel="stylesheet">

<!--分页  -->
<script src="../static/paginator/bootstrap-paginator.js"
	type="text/javascript"></script>
<!-- 公共样式表	，公共方法 -->
<link href="../static/media/css/my-style.css" rel="stylesheet"
	type="text/css" />
<script src="../static/media/js/main.js" type="text/javascript"></script>

<!-- <link href="../static/jquery-select2/4.0/select2.min.css" rel="stylesheet"> -->
<link href="../static/jquery-validation/1.11.0/jquery.validate.min.css"
	type="text/css" rel="stylesheet">
<link href="../static/jquery-jbox/2.3/Skins/Bootstrap/jbox.min.css"
	rel="stylesheet">
<link href="../static/My97DatePicker/skin/WdatePicker.css"
	rel="stylesheet" type="text/css">
<link href="../static/common/smart.min.css" type="text/css"
	rel="stylesheet">
<script src="../static/bootstrap/2.3.1/js/bootstrap.min.js"
	type="text/javascript"></script>
<!-- <script src="../static/jquery-select2/4.0/select2.min.js" type="text/javascript"></script> -->
<script src="../static/jquery-validation/1.11.0/jquery.validate.min.js"
	type="text/javascript"></script>
<script src="../static/jquery-jbox/2.3/jquery.jBox-2.3.src.js"
	type="text/javascript"></script>
<script src="../static/My97DatePicker/WdatePicker.js"
	type="text/javascript"></script>
<script src="../static/common/mustache.min.js" type="text/javascript"></script>
<script src="../static/common/smart.min.js" type="text/javascript"></script>
<script src="../../config/smart-common.js" type="text/javascript"></script>
<script src="../static/wy/area.js" type="text/javascript"></script>
<script src="../static/echart/echarts.js" type="text/javascript"></script>
    <!-- 引入 echarts.js -->
    <script src="../static/echart/echarts.min.js"></script>
  <style>
	.map-title{
		padding:10px;
		border-bottom:1px solid #ddd;
	}
</style>  
</head>
<body>
<input type="hidden" value="0" id="flag">
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
   <div style="overflow: hidden; width: 100%">
		<!-- <div style="width: 45%; height: 400px;position:relative;float:left;border:0px solid #000" id="css1">
		<div style="width: 100%; height: 400px;position:absolute;left:0px;top:0px">
			</div>
			<div id="main" style="width: 100%; height: 400px; float: left;border:1px   ">
			//chart 
		</div>
		</div> -->
		<div style="width: 44%; height: 400px;position:relative;float:left;border:1px solid #ddd;margin-left:4%;margin-right:4%;" id="css1">
		<div class="map-title">投诉类目分布</div>
		<div style="width: 100%; height: 400px;position:absolute;left:0px;top:0px">
			</div>
			<div id="main" style="width: 100%; height: 350px; float: left;border:1px   ">
			<!-- //chart  -->
			
		</div>
		</div>
		<!-- <div style="width: 44%; height: 400px;position:relative;float:left;border:1px solid #ddd;" id="box4">
		<div class="map-title">投诉类目排名</div><img
				src="../static/wy/ld.png" style="width: 20px; cursor: pointer;margin-left:490px;margin-top: -40px"
				title="筛选" onclick="func2()">
		<div style="width: 100%; height: 400px;position:absolute;left:0px;top:0px" >
			</div>
			<table id="privilegeTableClass"
				class="table table-striped table-bordered table-condensed">
				<thead>
					<tr>
						<th>排名</th>
						<th>类目</th>
						<th>指标</th>
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>
			//chart 
			
		</div> -->
		
		<div id="box4" style="width:47%; height: 389px; float: right;margin-top: -400px;border:1px solid #ddd;margin-right: 2%;">
		<div class="map-title">投诉类目排名<img
				src="../static/wy/ld.png" style="width: 20px; cursor: pointer;margin-left:490px;margin-top: -40px"
				title="筛选" onclick="func2()"></div>
	
				<table id="privilegeTableClass"
				class="table table-striped table-bordered table-condensed">
				<thead>
					<tr>
						<th>排名</th>
						<th>类目</th>
						<th>指标</th>
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>
		</div>
		</div>

	
	 <div style="overflow: hidden; width: 100%">
	<!-- 	<div id="box5" style="width:100%; height: 400px; float: right;margin-top: 20px;">
			动态类目: <select id="dynamicCategory">
				<option value='1'>投诉部位</option>
				<option value='2'>投诉分类</option>
				<option value='3'>投诉对象</option>
				<option value='4'>投诉问题</option>
			</select> 动态指标: <select id="type">
				<option value='1'>投诉工单数</option>
				<option value='2'>投诉业主数</option>
				<option value='3'>投诉率</option>
				<option value='4'>全部业主平均每块区域投诉条数</option>
				<option value='5'>投诉业主平均每块区域投诉条数</option>
				<option value='6'>投诉平均处理时长</option>
				<option value='7'>投诉完成率</option>
				<option value='8'>投诉投诉率</option>
			</select> <input id="btnSubmitLog1"
				class="btn btn-primary btn_middle small_blue " type="button"
				value="查询" onclick="fresh5();"></input> <b style="margin-top: 5px;color: black;font-Size:15px;font-Weight:normal;font-Family:宋体;font-Style:normal">投诉综合分析</b>  <img
				src="../static/wy/ld.png" style="width: 20px; cursor: pointer;margin-left:490px;margin-top: -40px"
				title="筛选" onclick="func3()">
			<table id="privilegeTableClass1"
				class="table table-striped table-bordered table-condensed">
				<thead>
					<tr>
						<th>排名</th>
						<th id="showTitle">投诉工单数</th>
						<th>投诉分类</th>
						<th>投诉类目</th>
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>
		</div> -->
		<div id="box5" style="width: 100%; height: 389px; float: left;margin-top: 20px;border:1px solid #ddd;margin-left: 2%;">
			<div class="map-title">
			投诉综合分析<img src="../static/wy/ld.png"
				style="width: 20px; cursor: pointer;margin-left: 970px;margin-top: -10px" title="筛选" onclick="func3()">
			</div>
			<div  > </div>
			<table id="privilegeTableClass1"
				class="table table-striped table-bordered table-condensed">
				<thead>
					<tr>
						<th>排名</th>
						<th id="showTitle">投诉工单数</th>
						<th>投诉分类</th>
						<th>投诉类目</th>
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>
		</div>
	</div>
	<div id="chooseDate5"
			style="position: absolute; border: 1px solid; left: 642px; top: 160px; background: #FFFFFF; width: 400px; padding-bottom: 20px; z-index: 100; text-align: center;"
			class="hide">
			<div id="importFormSureChange5" action="" method="post"
				enctype="multipart/form-data" class="form-search"
				style="padding-left: 20px; text-align: center; margin-bottom: 5px !important">
				<br />
				<div class="control-group" style="margin-top: 9px;">

					<div class="controls" style="margin-left: -28px;">
						<label for="customer-name" class="control-label">动态时间:</label>
						<select id="datetype5" name="datetype"
							onchange="find5(this.value)" class="query_input"
							style="width: 270px;">
						</select>
					</div>
				</div>

			</div>
			<div id="searchForm5" class="form-search hide"
			style="padding-left: 20px; text-align: center; margin-top: 5px !important"
				method="post" style="display: none">
				<div class="controls" style="margin-top: 5px">

					<div>
						<label for="customer-name" class="control-label" style="margin-left: -5px;">时间从:</label>
						<input id="startTime5" name="startTime" class="query_input Wdate"
							type="text" onclick="WdatePicker()" style="width: 257px;"/>
					</div>
				</div>
				<div class="controls" style="margin-top: 10px">

					<div>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label
							for="customer-name" class="control-label" style="margin-left: -5px;">至:</label> <input
							id="endTime5" name="endTime" class="query_input Wdate"
							type="text" onclick="WdatePicker()" style="width: 257px;" onfocus="WdatePicker({onpicked:function(dp){fresh5(); }})"/>
					</div>
				</div>

			</div>
			<label>动态类目::</label> <select class="input-xlarge "
				onchange="fresh5()" id="dynamicCategory">
				<option value='1'>报修部位</option>
				<option value='2'>报修分类</option>
				<option value='3'>报修对象</option>
				<option value='4'>报修问题</option>
			</select> <label>动态指标:</label> <select class="input-xlarge " id="type"
				onchange="fresh5()">
				<option value='1'>投诉工单数</option>
				<option value='2'>投诉业主数</option>
				<option value='3'>投诉率</option>
				<option value='4'>全部业主平均每块区域投诉条数</option>
				<option value='6'>投诉平均处理时长</option>
				<option value='7'>投诉完成率</option>
			</select>
			<!-- <input id="btnSubmitLog5"
				class="btn btn-primary btn_middle small_blue hide" type="button"
				value="查询" onclick="fresh3('e');"></input> -->
			<!-- <input type="button" class="btn btn-primary" value="关闭"
				onclick="closedivChange5()" /> -->

		</div>
<div id="chooseDate6"
			style="position: absolute; border: 1px solid; left: 82px; top: 140px; background: #FFFFFF; width: 400px; padding-bottom: 20px; z-index: 100; text-align: center;"
			class="hide">
			<div id="importFormSureChange5" action="" method="post"
				enctype="multipart/form-data" class="form-search"
				style="padding-left: 20px; text-align: center; margin-bottom: 5px !important">
				<br />
				<div class="control-group" style="margin-top: 9px;">

					<div class="controls" style="margin-left: -28px;">
						<label for="customer-name" class="control-label">动态时间:</label>
						<select id=datetype6 name="datetype"
							onchange="find(this.value)" class="query_input"
							style="width: 270px;">
						</select>
					</div>
				</div>

			</div>
			<div id="searchForm" class="form-search hide"
			style="padding-left: 20px; text-align: center; margin-top: 5px !important"
				method="post" style="display: none">
				<div class="controls" style="margin-top: 5px">

					<div>
						<label for="customer-name" class="control-label" style="margin-left: -5px;">时间从:</label>
						<input id="startTime" name="startTime" class="query_input Wdate"
							type="text" onclick="WdatePicker()" style="width: 257px;"/>
					</div>
				</div>
				<div class="controls" style="margin-top: 10px">

					<div>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label
							for="customer-name" class="control-label" style="margin-left: -5px;">至:</label> <input
							id="endTime" name="endTime" class="query_input Wdate"
							type="text" onclick="WdatePicker()" style="width: 257px;" onfocus="WdatePicker({onpicked:function(dp){queryData(); }})"/>
					</div>
				</div>

			</div>
			
			 <label>动态指标:</label> <select class="input-xlarge " id="type1"
				onchange="queryData()" style="margin-top: 11px;">
				<option value='1'>投诉工单数</option>
				<option value='2'>投诉业主数</option>
				<option value='9'>投诉建筑体数</option>
				
			</select>
			<!-- <input id="btnSubmitLog5"
				class="btn btn-primary btn_middle small_blue hide" type="button"
				value="查询" onclick="fresh3('e');"></input> -->
			<!-- <input type="button" class="btn btn-primary" value="关闭"
				onclick="closedivChange5()" /> -->

		</div>
		<div id="chooseDate7"
			style="position: absolute; border: 1px solid; left: 330px; top: 560px; background: #FFFFFF; width: 400px; padding-bottom: 20px; z-index: 100; text-align: center;"
			class="hide">
			<div id="importFormSureChange7" action="" method="post"
				enctype="multipart/form-data" class="form-search"
				style="padding-left: 20px; text-align: center; margin-bottom: 5px !important">
				<br />
				<div class="control-group" style="margin-top: 9px;">

					<div class="controls" style="margin-left: -28px;">
						<label for="customer-name" class="control-label">动态时间:</label>
						<select id=datetype7 name="datetype"
							onchange="find7(this.value)" class="query_input"
							style="width: 270px;">
						</select>
					</div>
				</div>

			</div>
			<div id="searchForm7" class="form-search hide"
			style="padding-left: 20px; text-align: center; margin-top: 5px !important"
				method="post" style="display: none">
				<div class="controls" style="margin-top: 5px">

					<div>
						<label for="customer-name" class="control-label" style="margin-left: -5px;">时间从:</label>
						<input id="startTime7" name="startTime" class="query_input Wdate"
							type="text" onclick="WdatePicker()" style="width: 257px;"/>
					</div>
				</div>
				<div class="controls" style="margin-top: 10px">

					<div>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label
							for="customer-name" class="control-label" style="margin-left: -5px;">至:</label> <input
							id="endTime7" name="endTime" class="query_input Wdate"
							type="text" onclick="WdatePicker()" style="width: 257px;" onfocus="WdatePicker({onpicked:function(dp){fresh6(); }})"/>
					</div>
				</div>

			</div>
			
			 <label>动态指标:</label> <select class="input-xlarge " id="type7"
				onchange="fresh6()" style="margin-top: 11px;">
				<option value='1'>投诉工单数</option>
				<option value='9'>投诉建筑体数</option>
				<option value='2'>投诉业主数</option>
				<option value='4'>全部业主平均每块区域投诉条数</option>
				<option value='5'>投诉业主平均每块区域投诉条数</option>
				<option value='6'>投诉平均处理时长</option>
				<option value='7'>投诉完成率</option>
				<option value='3'>投诉率</option>
				
				
			</select>
			<!-- <input id="btnSubmitLog5"
				class="btn btn-primary btn_middle small_blue hide" type="button"
				value="查询" onclick="fresh3('e');"></input> -->
			<!-- <input type="button" class="btn btn-primary" value="关闭"
				onclick="closedivChange5()" /> -->

		</div>
    <script type="text/javascript">
    $(document).ready(function(){
		queryData();
		fresh5();
		fresh6();
		$
		.ajax({
			headers : {
				"token" : localStorage
						.getItem("token")
			},
			url : APIHost
					+ '/repairInformation/getDates',
			type : 'POST',
			async : false, //或false,是否异步
			timeout : 5000,
			dataType : 'json',
			contentType : "application/json; charset=utf-8",
			success : function(res) {
				$('#datetype5')
						.append(
								"<option hidden='hidden' value=''></option>");
				for (i in res) {
					$('#datetype5').append(
							"<option value="+i+">"
									+ res[i]
									+ "</option>");
				}
				$('#datetype5')
						.append(
								"<option  value='e'>自定义</option>");
			},
			error : function() {
				console.log("错误");
			}
		});
		
		$
		.ajax({
			headers : {
				"token" : localStorage
						.getItem("token")
			},
			url : APIHost
					+ '/todoEvent/getDates',
			type : 'POST',
			async : false, //或false,是否异步
			timeout : 5000,
			dataType : 'json',
			contentType : "application/json; charset=utf-8",
			success : function(res) {
				$('#datetype7')
						.append(
								"<option hidden='hidden' value=''></option>");
				for (i in res) {
					$('#datetype7').append(
							"<option value="+i+">"
									+ res[i]
									+ "</option>");
				}
				$('#datetype7')
						.append(
								"<option  value='e'>自定义</option>");
			},
			error : function() {
				console.log("错误");
			}
		});
	});
    function find(id) {
		if (id == 'e') {
			$("#startTime").val("");
			$("#endTime").val("");
			$("#searchForm").show();
		} else {
			$("#searchForm").hide();
			queryData();
		}
	}
    function find7(id) {
		if (id == 'e') {
			$("#startTime7").val("");
			$("#endTime7").val("");
			$("#searchForm7").show();
		} else {
			$("#searchForm7").hide();
			fresh6();
		}
	}
    
	var fontSize = 10;
	var rich = {
	    yellow: {
	        color: "#ffc72b",
	        fontSize: fontSize * 2,
	        padding: [5, 4],
	        align: 'center'
	    },
	    total: {
	        color: "#ffc72b",
	        fontSize: fontSize * 4,
	        align: 'center'
	    },
	    white: {
	        color: "#FFFFFF",
	        align: 'center',
	        fontSize: fontSize * 1.4,
	    },
	    blue: {
	        color: '#FFFFFF',
	        fontSize: fontSize * 1.2,
	        align: 'center'
	    },
	    hr: {
	        borderColor: '#0b5263',
	        width: '100%',
	        borderWidth: 1,
	        height: 0,
	    }
	}
	function queryData() {
		$("#flag").val('0');
		var val = $("#type").val();
		$("#chooseDate6").hide();
		$("#searchForm").hide();
		$("#css1").css("background","#FFFFFF");
		var c;
		if(val==1){
			c="投诉工单数";
		}else if(val==2){
			c="投诉业主数";
		}else if(val==9){
			c="投诉建筑体数";
		}
		$.ajax({
			headers : {
				"token" : localStorage.getItem("token")
			},
			url : APIHost + '/repairInformation/queryData',
			type : 'POST',
			async : false, //或false,是否异步
			data : {
				type :  $("#type1").val() ,
				type1 :1,//用来区分要不要取前十
				type2 :1,
				startTime1 : $("#startTime").val(),
				endTime1 : $("#endTime").val(),
				dynamicTimeType:$("#datetype6").val()
			},
			dataType : 'json',
			//contentType: "application/json; charset=utf-8",
			success : function(res) {
				 var myChart = echarts.init(document.getElementById('main'));
			        var data = [];
			        var result=res.data;
			        for(var i=0;i<result.length;i++){
			        	var children=[];
			        	var k=result[i].list;
			        	for(var j=0;j<k.length;j++){
			        		var color1="#"+("00000"+((Math.random()*16777215+0.5)>>0).toString(16)).slice(-6); 
			        		var num=k[j].count;
			        		var b={
			                        name: k[j].name,
			                        value:parseInt(num),
			                        itemStyle: {color: color1}
			                     };
			        		children.push(b);
			        	}
			        	var color2="#"+("00000"+((Math.random()*16777215+0.5)>>0).toString(16)).slice(-6); 
			        	var a={
			        			name:result[i].name,
			        			itemStyle: {color: color2},
			        			children:children
			        	       };
			        	data.push(a);
			        }
			        option = {
			            title:{
			              //  text: '投诉类目分布',
				               // subtext: 'Source: https://worldcoffeeresearch.org/work/sensory-lexicon/',
				                textStyle: {
				                	color:'black',
									fontStyle:'normal',
									fontSize : 15,
									fontWeight:'normal',
									fontFamily:'宋体'
				                },
				                sublink: 'https://worldcoffeeresearch.org/work/sensory-lexicon/'
			            },
			            toolbox: {  
	    		            show : true,  
	    		            feature : {  
	    		            myTool : {  
	    		                    show : true,  
	    		                    title : '筛选',  
	    		                    icon: 'path://M837 139.3L573.2 464.6 562 478.3V853.4L462 803V478.3l-11.2-13.8L187 139.3h650m105-50H82L412 496v337.8l200 100.8V496.1L942 89.3z',
	    		                    onclick : function (){ 
	    		                    	if($("#flag").val()=='1'){
	    		                    		alert("还有未关闭的窗口!请先关闭，才能点击！");
	    		                    		return;
	    		                    	}
	    		                    	$("#flag").val('1');
	    		                    	$("#chooseDate6").show();
	    		                    	$("#chooseDate2").hide();
	    		                    	$("#chooseDate3").hide();
	    		                    	$("#chooseDate4").hide();
	    		                    	$("#css1").css("background","#DDDDDD");
	    		                    	var obj=document.getElementById('datetype6');
	    		                        obj.options.length=0;//移除options 
	    		                		$.ajax({
	    		                			headers    : {
	    		                				"token" : localStorage.getItem("token")
	    		                			},
	    		                			url : APIHost + '/todoEvent/getDates',
	    		                			type : 'POST',
	    		                			async : false, //或false,是否异步
	    		                			timeout : 5000,
	    		                			dataType : 'json',
	    		                			contentType: "application/json; charset=utf-8",
	    		                			success : function(res) {
	    		                				$('#datetype6').append("<option hidden='hidden' value=''></option>");
	    		                				for(i in res){
	    		                    				$('#datetype6').append("<option value="+i+">"+res[i]+"</option>");
	    		                				}
	    		                				$('#datetype6').append("<option  value='e'>自定义</option>");
	    		                			},
	    		                			error : function() {
	    		                				console.log("错误");
	    		                			}
	    		                		});
	    		                    }  
	    		                 } 
	    		            }  
	    		        },
	    		        //color: ['#7EC0EE', '#7FFFD4', '#6CA6CD', '#7A67EE', '#48D1CC','#EEDFCC', '#104E8B'],
			            series: {
			                type: 'sunburst',
			                highlightPolicy: 'ancestor',
			                silent: true,
			                data: data,
			                label: {
					            normal: {
					                formatter: function(params, ticket, callback) {
					                    var total = 0; //考生总数量
					                    var percent = 0; //考生占比
					                    data.forEach(function(value, index, array) {
					                       var ch=value.children
					                    	for (var i in ch){
					                    		total +=ch[i].value;
					                    	}
					                    });
					                    percent = ((params.value / total) * 100).toFixed(1);
					                    return '{white|' + params.name + '}\n{blue|' + percent + '%}';
					                },
					                rich: rich
					            },
					        },
			                sort: null,
			                center: ['50%','50%'],
			                levels: [{}, {
			                    r0: '16%',
			                    r: '50%',
			                    itemStyle: {
			                        borderWidth: 2
			                    },
			                    label: {
			                        rotate: 'tangential'
			                    }
			                }, {
			                    r0: '100%',
			                    r: '50%',
			                    label: {
			                        align: ''
			                    }
			                }, {
			                    r0: '70%',
			                    r: '72%',
			                    label: {
			                        position: 'outside',
			                        padding: 3,
			                        silent: false
			                    },
			                    itemStyle: {
			                        borderWidth: 3
			                    }
			                }]
			            }
			        };


			        // 使用刚指定的配置项和数据显示图表。
			        myChart.setOption(option);
							setTimeout(function() {
								window.onresize = function() {
									myChart.resize();
								}
							}, 200)
			},
			error : function() {
				console.log("错误");
			}
		});

	}
        // 基于准备好的dom，初始化echarts实例
       function fresh5() {
			$("#flag").val('0');
			var val = $("#type").val();
			$("#chooseDate5").hide();
			$("#searchForm5").hide();
			$("#box4").css("background","#FFFFFF");
			//alert(val)
			//删除旧tbody
			var contentTableSub = document
					.getElementById("privilegeTableClass");
			var oldTbody = document.getElementById("privilegeTbody1");
			if (oldTbody != null) {
				contentTableSub.removeChild(oldTbody);
			}
			$
					.ajax({
						headers : {
							"token" : localStorage.getItem("token")
						},
						url : APIHost
								+ '/repairInformation/getRepairCategoryList',
						type : 'POST',
						async : false, //或false,是否异步
						data : {
							type : $("#type").val(),
							type2 :1,
							dynamicCategory : $("#dynamicCategory").val(),
							dynamicTimeType : $("#datetype5").val(),
							startTime1 : $("#startTime5").val(),
							endTime1 : $("#endTime5").val()
						},
						dataType : 'json',
						//contentType: "application/json; charset=utf-8",
						success : function(obj) {
							var newTbody = document.createElement("tbody");
							newTbody.setAttribute("id", "privilegeTbody1");
							var goodBo = obj.data;
							for (var i = 0; i < goodBo.length; i++) {
								var goods = goodBo[i];
								var tr = document.createElement("tr");
								//序号
								var td12 = document.createElement("td");
								td12.innerHTML = i + 1;
								td12.className = "order_number";
								tr.appendChild(td12);

								var td2 = document.createElement("td");
								td2.innerHTML = goods.name;
								tr.appendChild(td2);

								var td5 = document.createElement("td");

								if (val == 1) {
									td5.innerHTML = "投诉工单数" + goods.count;
								} else if (val == 2) {
									td5.innerHTML = "投诉业主数" + goods.count;
								} else if (val == 3) {
									td5.innerHTML = "投诉率" + goods.count + "%";
								} else if (val == 4) {
									td5.innerHTML = "全部业主平均每块区域投诉条数"
											+ goods.count;
								} else if (val == 5) {
									td5.innerHTML = "投诉业主平均每块区域投诉条数"
											+ goods.count;
								} else if (val == 6) {
									td5.innerHTML = "投诉平均处理时长" + goods.count
											+ "分钟";
								} else if (val == 7) {
									td5.innerHTML = "投诉完成率" + goods.count + "%";
								} else if (val == 8) {
									td5.innerHTML = "投诉投诉率" + goods.count + "%";
								}

								tr.appendChild(td5);

								newTbody.appendChild(tr);
							}

							contentTableSub.appendChild(newTbody);
							//table下每一行tr选中高亮
							inputCheck();
							//调用操作按钮方法
							handelBtn();
							//内容自适应iframe高度
							setIframeHeight(parent.document
									.getElementById('mainFrame'));

						}
					});

		}
       function func2() {
			if($("#flag").val()=='1'){
       		alert("还有未关闭的窗口!请先关闭，才能点击！");
       		return;
       	}
       	$("#flag").val('1');
			$("#box4").css("background-color","#DDDDDD");
			$("#privilegeTableClass").css("background-color","#DDDDDD");
			$("#chooseDate5").show();
		}
       function func3() {
			if($("#flag").val()=='1'){
      		alert("还有未关闭的窗口!请先关闭，才能点击！");
      		return;
      	}
      	$("#flag").val('1');
			$("#box5").css("background-color","#DDDDDD");
			$("#privilegeTableClass1").css("background-color","#DDDDDD");
			$("#chooseDate7").show();
		}
       function find5(id) {
			if (id == 'e') {
				$("#startTime5").val("");
				$("#endTime5").val("");
				$("#searchForm5").show();
				$("#btnSubmitLog5").show();
			} else {
				$("#searchForm5").hide();
				$("#btnSubmitLog5").hide();
				fresh5();
			}
		}
       function fresh6() {
			$("#flag").val('0');
			var val = $("#type7").val();
			$("#chooseDate7").hide();
			$("#searchForm7").hide();
			$("#box5").css("background","#FFFFFF");
			//alert(val)
			//删除旧tbody
			var contentTableSub = document
					.getElementById("privilegeTableClass1");
			var oldTbody = document.getElementById("privilegeTbody2");
			if (oldTbody != null) {
				contentTableSub.removeChild(oldTbody);
			}
			$
					.ajax({
						headers : {
							"token" : localStorage.getItem("token")
						},
						url : APIHost
								+ '/repairInformation/getRepairCategoryList',
						type : 'POST',
						async : false, //或false,是否异步
						data : {
							type : $("#type7").val(),
							type2 :1,
							dynamicCategory : "1",
							dynamicTimeType : $("#datetype7").val(),
							startTime1 : $("#startTime7").val(),
							endTime1 : $("#endTime7").val()
						},
						dataType : 'json',
						//contentType: "application/json; charset=utf-8",
						success : function(obj) {
							var newTbody = document.createElement("tbody");
							newTbody.setAttribute("id", "privilegeTbody2");
							var goodBo = obj.data;
							for (var i = 0; i < goodBo.length; i++) {
								var goods = goodBo[i];
								var tr = document.createElement("tr");
								//序号
								var td12 = document.createElement("td");
								td12.innerHTML = i + 1;
								td12.className = "order_number";
								tr.appendChild(td12);
								
								var td5 = document.createElement("td");
								td5.innerHTML =goods.count;
								tr.appendChild(td5);

								var td2 = document.createElement("td");
								td2.innerHTML = goods.parentName;
								tr.appendChild(td2);
								
								var td3 = document.createElement("td");
								td3.innerHTML = goods.name;
								tr.appendChild(td3);

								
								if (val == 1) {
									$("#showTitle").html("投诉工单数"); 
								} else if (val == 2) {
									$("#showTitle").html("投诉业主数"); 
								} else if (val == 3) {
									$("#showTitle").html("投诉率(%)"); 
								} else if (val == 4) {
									$("#showTitle").html("全部业主平均每块区域投诉条数");
								} else if (val == 5) {
									$("#showTitle").html("投诉业主平均每块区域投诉条数");
								} else if (val == 6) {
									$("#showTitle").html("投诉平均处理时长(分钟)");
								} else if (val == 7) {
									$("#showTitle").html("投诉完成率(%)");
								} else if (val == 9) {
									$("#showTitle").html("投诉建筑体数");
								}

								

								newTbody.appendChild(tr);
							}

							contentTableSub.appendChild(newTbody);
							//table下每一行tr选中高亮
							inputCheck();
							//调用操作按钮方法
							handelBtn();
							//内容自适应iframe高度
							setIframeHeight(parent.document
									.getElementById('mainFrame'));

						}
					});

		}
    </script>
</body>
</html>