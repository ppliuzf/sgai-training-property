<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=8,IE=9,IE=10">
	<meta http-equiv="Expires" content="0">
	<meta http-equiv="Cache-Control" content="no-cache">
	<meta http-equiv="Cache-Control" content="no-store">
	<title>IBMS</title>
	<link href="../static/bootstrap/2.3.1/css_cerulean/bootstrap.min.css" type="text/css" rel="stylesheet">

	<link href="../static/My97DatePicker/skin/WdatePicker.css" rel="stylesheet" type="text/css">

	<script src="../static/jquery/jquery-1.9.1.min.js" type="text/javascript"></script>
	<script src="../static/My97DatePicker/WdatePicker.js" type="text/javascript"></script>
	
	<!--分页  -->	
	<script src="../static/paginator/bootstrap-paginator.js" type="text/javascript"></script>

	<!-- 公共样式表	，公共方法 -->
	<script src="../static/bootstrap/2.3.1/js/bootstrap.min.js" type="text/javascript"></script>
    <style>

		.butCenter
		{
		text-align: center !important;
		}
		.inputSearch{
		padding-left:2px !important;
		padding-right:2px !important;
		}
		.ck{
		}
		.innertd{
		}
		/* 添加框设备table */
		.tableequm{
		  height:100px !important;
		}
		.btn-default {
	    color: #333;
	    background-color: #e6e6e6;
	    border: none;
        }
       .f_right {
   		    width: 300px;
    		float: right;
    		margin-right: 0%;
    		margin-top: 18px;
    		text-align: right;
		}
		.model-title:after{
		    left: 137px;
		}
		.table-responsive{
			max-height: 100%;
		}
		html,body{
			height:100%;
		}
		.btn-toolbar .btn-info {
		    background: linear-gradient(to bottom, #4189c8 0%,#2e6da3 100%);
		    box-shadow: 0 1px 3px rgba(255,255,255,0.8) inset;
		    /* border-top: 1px solid #2d6ca2; */
		}
		.btn-toolbar .btn-xs {
		    font-size: 16px;
		    /*padding: 5px 35px;*/
		    /*border-radius: 10px;*/
		    margin: 0;
		    outline: none;
		    margin-left: 15px;
		    background: #4d90fe;
		    border: 1px solid #4d90fe;
		    margin-left: 10px;
		    box-shadow: none;
		    width: 66px;
		    height: 30px;
		    line-height: 21px;
		    cursor:pointer;
		}
		.btn-toolbar .btn-xs:hover{
		    background: #0362fd !important;
    		border: 1px solid #0362fd !important;
    		outline: 0 !important;
		}
		.iconfont{
			display: none;
		}
		.form-horizontal{
			overflow: hidden;
		}
		#inftable tr th{
			text-align: center;
			background: #f5f5f5;
		}
		.table-responsive{
			padding-top: 5px;
		}
		.table tbody > tr > td {
		    color: #666666;
		    font-size: 14px;
		    line-height: 1.97;
		    height: 41px;
		    text-align: center;
		    vertical-align: middle;
		    background: #fff !important;
		}
		.footer{
			padding: 0 20px;
		}
		.pagination ul>li {
    		display: inline;
		}
		#page_div ul li {
    		cursor: pointer;
		}
		.pagination ul>li:first-child>a, .pagination ul>li:first-child>span {
		    border-left-width: 1px;
		    -webkit-border-bottom-left-radius: 4px;
		    border-bottom-left-radius: 4px;
		    -webkit-border-top-left-radius: 4px;
		    border-top-left-radius: 4px;
		    -moz-border-radius-bottomleft: 4px;
		    -moz-border-radius-topleft: 4px;
		}
		#page_div{
			text-align: right;
		}
		.page-size{
			width: 52px;
    		height: 28px;
    		margin-top: 5px;
		}
		.span6{
			padding-top: 18px;
		}
		.col-sm-2{
			float: left;
			margin-left: 15px;
		}
		.table-bordered thead:first-child tr:first-child>th:first-child,.table-bordered thead:first-child tr:first-child>th:last-child{
			border-radius: 0;
		}
		.table-bordered{
			border-radius: 0;
		}
		.fade{
			display: none;
		}
    </style>
</head>
<body>
<div class="container-fluid">
          <div class="btn-toolbar" role="toolbar" style="position: relative;width: 100%;margin-top: 20px">
		        <form  id="searchform" class="form-horizontal">
		        	<input type="hidden" id="pageNumber" name="pageNumber" value="1">
			        <input type="hidden" id="pageSize" name="pageSize" value="10">
					<div style="margin-left: 0" class="col-sm-2">
						<select id="locationSearch" name="locationSearch" class="form-control">
						</select>
					</div>
					
					<div class="col-sm-2">
						<input onclick="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss',isShowClear:false});" class="form-control" type="text" id="dateSearch" name="dateSearch" placeholder="日期">
					</div>
					<div class="col-sm-2">
						<input class="form-control" type="text" id="eqmNameSearch" name="eqmNameSearch" placeholder="名称">
						
					</div>
					<div class="col-sm-2" style="width:500px">
					<button style="margin-left: 0" type="button" class="btn btn-info btn-xs" onclick="searchInstructions1()">
		                                   查询<span class="icon iconfont">&#xe60d;</span>
		             </button>	
		             <button type="button" class="btn btn-info btn-xs"  onclick="searchHighter()">
		                                   高级<span class="icon iconfont">&#xe60d;</span>
		             </button>	
		             <button type="button" class="btn btn-info btn-xs" onclick="exportExcel()">
                	           导出<span class="icon iconfont">&#xe60d;</span>
                     </button>
                     </div> 
				 </form>
				
		  </div>
		  	
		  <div class="table-responsive">
            <table id="inftable" class="table table-striped table-bordered text-center">
                <thead>
                <!-- 序号	模式名称	时间点	位置	专业	设备	操作	备注	操作 -->
                    <th>选择</th>
                    <th>序号</th>
					<th>日期</th>
					<th>位置</th>
					<th>专业</th>
					<th>设备</th>
                    <th>模式名称</th>
                    <th>模式类型</th>
                    <th>时间点</th>
                    <th>参数</th>
                    <th>参数值</th>
                    <th>指令状态</th> 
                </thead>
                <tbody id="contextInf">
                	<tr id="ModelcalendarObj14080" style="height: 39.9259px;">
                		<td><input type="checkbox" id="modelCalendarId_1" value="14080"></td>
                		<td>1</td><td>2017-08-02</td>
                		<td>5筒b1层</td>
                		<td>空调专业</td>
                		<td>风机盘管3</td>
                		<td>夏季模式</td>
                		<td>计划模式</td>
                		<td>00:00:00</td>
                		<td>上位风机输出</td>
                		<td>20</td>
                		<td>未发送</td>
                	</tr>
                </tbody>
            </table>
        </div>		
		  </div>
  <!--   <div class="container-fluid">
    	<div class="pannel"><a onclick="showNiagara()">niagara 画面调用信息</a></div>
    </div> -->
     <!-- 高级查询 模态框 -->
<div  class="container">
 <div class="modal fade"  id="searchHighter" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	    <div class="modal-dialog" style="width:50%;border-radius:10px">
	        <div class="modal-content" style="border-radius:10px">
	            <div class="modal-header" style="background-color:#337ab7 !important;">
	                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
	                <h4 class="modal-title" id="myModelFacilityConent">高级查询</h4>
	            </div>
	            <div class="modal-body">
		        <form  id="searchform2" class="form-horizontal"> 
					<div class="">
						<select id="modelSearch" name="modelSearch" class="form-control">
						</select>
					</div>
					<div class="">
						<select id="modelTypeSearch" name="modelTypeSearch" class="form-control">
						<option hidden="hidden" value="">模式类型</option>
							<option value="临时模式">临时模式</option>
							<option value="计划模式">计划模式</option>
						</select>
					</div>
					<div class="">
						<select id="locationSearch2" name="locationSearch2" class="form-control">
						</select>
					</div>
					
					<div class="">
						<input class="form-control" type="text" id="dateSearch2" name="dateSearch2" placeholder="日期">
					</div>
					<div class="">
						<input class="form-control" type="text" id="eqmNameSearch2" name="eqmNameSearch2" placeholder="名称">
					</div>
					<div class="">
						<input class="form-control" type="text" id="timePointStart" name="timePointStart" placeholder="开始时间">
					</div>
					<div class="">
						<input class="form-control" type="text" id="timePointEnd" name="timePointEnd" placeholder="结束时间">
					</div>
					<div class="">
						<select id="status" class="form-control">
							<option hidden="hidden" value="">状态</option>
							<option value="0">未发送</option>
							<option value="1">已发送</option>
							<option value="4">异常</option>
						</select>
					</div>
				 </form>
		  <div class="btn-toolbar text-right" role="toolbar">
		  		<button type="button" class="btn btn-info btn-xs" style="margin-top:2px;" onclick="searchInstructions2()" >
		                                   查询<span class="icon iconfont">&#xe60d;</span>
		        </button>
		        <button type="button" class="btn btn-info btn-xs" style="margin-top:2px;" onclick="clearUp()" >
		                                   清空<span class="icon iconfont">&#xe60d;</span>
		        </button>		
		  </div>
				</div> 
	        </div>
	    </div>
	</div>
  </div>
	<!-- 翻页 -->
  <div class="footer">
  		<div class="table_fluid">
  			<!-- <div class="row-fluid">
				<div style="padding-top: 15px" class="span6">
					<span id="pageNow"></span><span>-</span><span id="allPage"></span>页&nbsp;&nbsp;<span>共<span id="allNum"></span>项</span>&nbsp;&nbsp;
					<select class="page-size">
						<option value="10">10</option>
						<option value="20">20</option>
						<option value="50">50</option>
					<select>&nbsp;项/页
				</div>
				<div id="page_div">
				</div>
			</div> -->
  		</div>
  </div>

  <script type="text/javascript">
	function pageRightContent(){
		var pageRightContent='<div class="row-fluid">'
		+'<div style="padding-top: 15px" class="span6">'
		+'<span id="pageNow"></span><span>-</span><span id="allPage"></span>页&nbsp;&nbsp;<span>共<span id="allNum"></span>项</span>&nbsp;&nbsp;'
		+'<select class="page-size">'
			+'<option value="10">10</option>'
			+'<option value="20">20</option>'
			+'<option value="50">50</option>'
		+'<select>&nbsp;项/页'
		+'</div>'
		+'<div id="page_div">'
		+'</div>'
		+'</div>';
		$(".table_fluid").append(pageRightContent);

		$(".page-size").on("change",function(){
			pageSize = this.value;
			pageload(page,pageSize);
		});
	}
	pageRightContent();

	var pageSize;
	var page;
//分页返回数据
	function pageContent(data){
		// var allPageNum = Math.ceil(data.count/data.pageSize);
		// var page = data.pageNo;
		// $("#pageNow").html(page);
		// $("#allNum").html(data.count);
		// $("#allPage").html(allPageNum);
		var allPageNum = 20;
		var page = 1;
		options = {
		    size:"normal",
		    currentPage: page,
		    totalPages:allPageNum,
		    numberOfPages:10,
		    onPageClicked: function(e,originalEvent,type,page){
		    	pageload(page,pageSize)
		    }
		};
		$("#page_div").bootstrapPaginator(options);
	}
	pageContent();
  </script>
    <script type="text/javascript">
    	$('#locationSearch').change(function(){
    		if($('#locationSearch').val()=="清空"){
    			$('#locationSearch').val("");
    		}
    	})
    	//高级查询清空
	clearUp=function(){
		$("#modelSearch").val("");
		$("#modelTypeSearch").val("");
		$("#locationSearch2").val("");
		$("#eqmNameSearch2").val("");
		$("#timePointStart").val("");
		$("#timePointEnd").val("");
		$("#status").val("");
		$("#dateSearch2").val("");
	}
  //报警信息测试 ---通过jquery.messager.js 插件实现
    alertShowTest = function(data){
    	$.messager.show('不会关闭的消息', data, 0);
   	 }
    sendMessToNiagara = function(){
    	$.ajax({
        	url: "${ctx}/ruag/eqminstructionlog/sendniagaramess",
        	type: "GET",
        	data: {},
        	dataType: "json",
        	cache: false,
        	success: function(data){
        	},
        	error:  function(err){
        		reLogin()
        	}
        });
    }
  //页面初始化函数
    initialize = function(){
    	//加载查询条件数据---模式条件数据
        $.ajax({ 
            	url: "${ctx}/ruag/modeltemplate/findAll",
            	type: "GET",
            	data: {},
            	dataType: "json",
            	cache: false,
            	success: function(data){
            		$("#modelSearch").empty();
            		$("#modelSearch").append("<option hidden='hidden' value=''>模式</option>");
            		$("#modelSearch").append("<option value=''></option>");
            		/* for(var i in data){
            			$("#modelSearch").append("<option value='"+data[i].name+"'>"+data[i].name+"</option>");
            		} */
            		for(var i=0;i<data.length;i++){
            			$("#modelSearch").append("<option value='"+data[i].name+"'>"+data[i].name+"</option>");
            		}
            	},
            	error:  function(err){
            		reLogin()
            	}
            	
            });
        //加载查询条件数据--位置条件数据
       	$.ajax({
        	url: "${ctx}/ruag/position/findAll",
        	type: "GET",
        	data: {},
        	dataType: "json",
        	cache: false,
        	success: function(data){
        		$("#locationSearch").empty();
        		$("#locationSearch").append("<option hidden='hidden' value=''>位置</option>");
        		/* for(var i in data){
        			$("#locationSearch").append("<option value='"+data[i].location+"'>"+data[i].location+"</option>");
        		} */
        		for(var i=0;i<data.length;i++){
        			$("#locationSearch").append("<option value='"+data[i].location+"'>"+data[i].location+"</option>");
        		}
        		$("#locationSearch").append("<option value='清空'>清空</option>");
        		$("#locationSearch2").empty();
        		$("#locationSearch2").append("<option hidden='hidden' value=''>位置</option>");
        		/* for(var i in data){
        			$("#locationSearch").append("<option value='"+data[i].location+"'>"+data[i].location+"</option>");
        		} */
        		for(var i=0;i<data.length;i++){
        			$("#locationSearch2").append("<option value='"+data[i].location+"'>"+data[i].location+"</option>");
        		}
        	},
        	error:  function(err){
        		reLogin()
        	}
        	
        }); 
        /*分页条件*/
        var pageCondition = {
        		page_pageNumber:1,
        		page_pageSize:10
    	};
        $.ajax({
            	url: "${ctx}/ruag/eqminstruction/findEasyuiPage",
            	type: "GET",
            	data: pageCondition,
            	dataType: "json",
            	cache: false,
            	success: function(data){
            		//总记录数
            		$("#totalNumTool").val(data.total);
            		var totaln=data.total;
            		//每页记录条数
            		var sizep=$("#pageSize").val();
            		var pageto=Math.ceil(totaln/sizep);
            		//当前页数
            		$("#pagetotalTool").val(pageto);
            		var items=data.rows;
            		$("#contextInf").empty();
            		/* for(var i in items){
            			addInstruction(items[i]);
            		} */
            		for(var i=0;i<items.length;i++){
            			addInstruction(items[i]);
            		}
            		$("#inftable").addClass("table table- table-bordered text-center");
            		
            	},
            	error:  function(err){
            		reLogin()
            	}
            	
            });
	}
    
    //item--eqmnstruction 一条数据
    var itemSeq = 0;
    var wdWidth = window.screen.width;
    var tableHeight;
    addInstruction=function(item){
    	var effectiveStatus ;
    	var instructionStatus;
    	if(item.effectiveStatus==1){
    		effectiveStatus = "显示";
    	}else if(item.effectiveStatus==0){
    		effectiveStatus = "隐藏";
    	}
    	if(item.instructionStatus==0){
    		instructionStatus = "未发送";
    	}else if(item.instructionStatus==1){
    		instructionStatus = "已发送";
    	}else if(item.instructionStatus==2){
    		instructionStatus = "已接收";
    	}else if(item.instructionStatus==3){
    		instructionStatus = "已执行";
    	}else if(item.instructionStatus==4){
    		instructionStatus = "异常";
    	}
    	itemSeq = itemSeq+1;
    	var str = "";
    	var status="";
    	str += "<tr id='ModelcalendarObj"+item.id+"'>";
    	str += "<td><input type='checkbox' id='modelCalendarId_1' value='"+item.id+"'/></td>";
    	str += "<td>"+itemSeq+"</td>";
    	str += "<td>"+item.date+"</td>";
    	str += "<td>"+item.eqmPo+"</td>";
    	str += "<td>"+item.eqmPro+"</td>";
    	str += "<td>"+item.eqmName+"</td>";
    	str += "<td>"+item.modelName+"</td>";
    	str += "<td>"+item.modelType+"</td>";
    	//str+="<td><a href='javascript:void(0)' onclick='showModelDetails("+item.modelTemplateId+")'>"+item.modelName+"</a></td>"
    	str += "<td>"+item.timePoint+"</td>";
    	str += "<td>"+item.parameterName+"</td>";
    	if(item.parameterName=="开关状态"){
    		if(item.parameterValue=="1"){
        		status="开";
        		str += "<td>"+status+"</td>";
        	}else if(item.parameterValue=="0"){
        		status="关";
        		str += "<td>"+status+"</td>";	
        	}
    	}else{
    		str += "<td>"+item.parameterValue+"</td>";
    	}
    	str += "<td>"+instructionStatus+"</td>";
    	str += "</tr>";
    	$("#contextInf").append(str);
    	if(wdWidth == 1366){
    		$(".table-responsive").css("marginTop","10px");
    		$(".btn-toolbar").css({"marginBottom":"0","marginTop":"30px"});
    		$(".container-fluid").css("paddingTop","0");
    		$(".table tbody > tr > td").css({"lineHeight":"1.6"})
    	}else if(wdWidth == 1360){
    		$(".table-responsive").css("height","450px");
    	}else if(wdWidth < 1360){
    		$(".table-responsive").css("marginTop","-8px");
    		var windowHeight = $("body").height()/12.5;
    	}else{
    		var windowHeight = $("body").height()/13.5;
    	}
    	setTimeout(function(){
    		tableHeight = $(".table-responsive").height();
    		$(".table-responsive").css("maxHeight",tableHeight);
    	},200)
		$("#contextInf tr").height(windowHeight);	
    }
    addInstruction2=function(item){
    	var effectiveStatus ;
    	var instructionStatus;
    	if(item.effectiveStatus==1){
    		effectiveStatus = "显示";
    	}else if(item.effectiveStatus==0){
    		effectiveStatus = "隐藏";
    	}
    	if(item.instructionStatus==0){
    		instructionStatus = "未发送";
    	}else if(item.instructionStatus==1){
    		instructionStatus = "已发送";
    	}else if(item.instructionStatus==2){
    		instructionStatus = "已接收";
    	}else if(item.instructionStatus==3){
    		instructionStatus = "已执行";
    	}else if(item.instructionStatus==4){
    		instructionStatus = "异常";
    	}
    	itemSeq = itemSeq+1;
    	var str = "";
    	var status="";
    	str += "<tr id='ModelcalendarObj"+item.id+"'>";
    	str += "<td><input type='checkbox' id='modelCalendarId_1' value='"+item.id+"'/></td>";
    	str += "<td>"+itemSeq+"</td>";
    	str += "<td>"+item.date+"</td>";
    	str += "<td>"+item.eqmPo+"</td>";
    	str += "<td>"+item.eqmPro+"</td>";
    	str += "<td>"+item.eqmName+"</td>";
    	str += "<td>"+item.modelName+"</td>";
    	str += "<td>"+item.modelType+"</td>";
    	//str+="<td><a href='javascript:void(0)' onclick='showModelDetails("+item.modelTemplateId+")'>"+item.modelName+"</a></td>"
    	str += "<td>"+item.timePoint+"</td>";
    	str += "<td>"+item.parameterName+"</td>";
    	if(item.parameterName=="开关状态"){
    		if(item.parameterValue=="1"){
        		status="开";
        		str += "<td>"+status+"</td>";
        	}else if(item.parameterValue=="0"){
        		status="关";
        		str += "<td>"+status+"</td>";	
        	}
    	}else{
    		str += "<td>"+item.parameterValue+"</td>";
    	}
    	str += "<td>"+instructionStatus+"</td>";
    	str += "</tr>";
    	$("#contextInf").append(str);
    	if(wdWidth == 1366){
    		$(".table-responsive").css("marginTop","10px");
    		$(".btn-toolbar").css({"marginBottom":"0","marginTop":"30px"});
    		$(".container-fluid").css("paddingTop","0");
    		$(".table tbody > tr > td").css({"lineHeight":"1.6"})
    	}else if(wdWidth == 1360){
    		$(".table-responsive").css("height","450px");
    	}else if(wdWidth < 1360){
    		$(".table-responsive").css("marginTop","-8px");
    		var windowHeight = $("body").height()/12.5;
    	}else{
    		var windowHeight = $("body").height()/13.5;
    	}
    	setTimeout(function(){
    		$(".table-responsive").css("maxHeight",tableHeight);
    	},200)
		$("#contextInf tr").height(windowHeight);	
    }
    //按條件查詢
    var queryCondition = {};
    searchInstructions1=function(){
    	$("#pageNumberTool").val(1);
    	$("#pageNumber").val(1);
    	 queryCondition = {
    			page_pageNumber:$("#pageNumber").val(),
    			page_pageSize:$("#pageSize").val(),
    			search_LIKE_eqmName:$("#eqmNameSearch").val(),
    			search_LIKE_date:$("#dateSearch").val(),
    			search_LIKE_eqmPo:$("#locationSearch").val(),
    			
    	}
    	searchInstructions();
    }
    searchInstructions2=function(){
    	$("#pageNumberTool").val(1);
    	$("#pageNumber").val(1);
    	 queryCondition={
    			page_pageNumber:$("#pageNumber").val(),
    			page_pageSize:$("#pageSize").val(),
    			search_EQ_instructionStatus:$("#status").val(),
    			search_LIKE_eqmName:$("#eqmNameSearch2").val(),
    			search_GTE_timePoint:$("#timePointStart").val(),
    			search_LTE_timePoint:$("#timePointEnd").val(),
    			search_LIKE_modelName:$("#modelSearch").val(),
    			search_LIKE_date:$("#dateSearch2").val(),
    			search_LIKE_eqmPo:$("#locationSearch2").val(),
    			search_LIKE_modelType:$("#mdelType").val(),
    	}
    	searchInstructions();
    }
    searchInstructions=function(){
    	 queryCondition["page_pageNumber"]=$("#pageNumber").val();
    	 queryCondition["page_pageSize"]=$("#pageSize").val();
    		$.ajax({
            	url: "${ctx}/ruag/eqminstruction/findEasyuiPage",
            	type: "GET",
            	data: queryCondition,
            	dataType: "json",
            	cache: false,
            	success: function(data){
            		$("#contextInf").empty();
            		itemSeq = 0;
            		/* 分页信息显示内容 */
            		$("#totalNumTool").val(data.total);
            		var totaln=data.total;
            		var sizep=$("#pageSize").val();
            		var pageto=Math.ceil(totaln/sizep);
            		$("#pagetotalTool").val(pageto);
            		var items=data.rows;
            		for(var i=0;i<items.length;i++){
            			addInstruction2(items[i]);
            		}
            		$('#searchHighter').modal('hide');
            	},
            	error:  function(err){
            		reLogin()
            	}
            	
            });
    	}
    //高级查询
    function searchHighter(){
    	$('#searchHighter').modal({
            keyboard: true
        });
    }
    /*----------------字段校验--bootstrap validator插件-----------------------
    //--------------------------------------------------------------------*/
    
    initialValidator = function(){
    	$("#workModelform").bootstrapValidator({  
            message: 'This value is not valid', 
            feedbackIcons: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
                        },
            fields: {  
            	date:{  
                    message:'日期无效',  
                    validators:{  
                        notEmpty:{  
                            message:'日期不能为空'  
                        }  
                    }  
                }, 
                test:{  
                    message:'test无效',  
                    validators:{  
                        notEmpty:{  
                            message:'test不能为空'  
                        }  
                    }  
                }
            }  
        });
    }
    
  //下拉选择翻页的尺寸大小
	selectVal=function(obj){
		$("#numSize").html($(obj).html());
		$("#pageSize").val($(obj).html()); 
		searchInstructions2();
	}

	//前后翻页
	function  changePage(pageType){
		if(pageType=="fir"){
	    	$("#pageNumber").val(1);
	    	$("#pageNumberTool").val(1);
	    
	    }
	    else if(pageType=="pre")
	    	{
	    	var newPageNum=$("#pageNumber").val();
	    	if(newPageNum==1)
	    	{
	    	$("#pageNumber").val(1);
	    	$("#pageNumberTool").val(1);
	    	}
	    	else
	    	{
	    	$("#pageNumber").val(Number(newPageNum)-Number(1));	
	    	$("#pageNumberTool").val(Number(newPageNum)-Number(1));
	    	}
	    	}
	    else if(pageType=="nex")
	    	{
	    	
	    	var newPageNum=$("#pageNumber").val()
	    	if($("#pagetotalTool").val()==newPageNum){
	    		$("#pageNumber").val(newPageNum);	
	    	}
	    	else{
	    		$("#pageNumber").val(Number(newPageNum)+Number(1));
	    		$("#pageNumberTool").val(Number(newPageNum)+Number(1));
	    	}
	    	}
	    else if(pageType=="las")
	    	{
	    	$("#pageNumber").val($("#pagetotalTool").val());
    		$("#pageNumberTool").val($("#pagetotalTool").val());
	    	}
		searchInstructions(); 
	}
    
	
	/*----------------------时间控件Start-----------------------------------*/
	 $.fn.datetimepicker.dates['zh'] = {   
            days:       ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六","星期日"],  
            daysShort:  ["日", "一", "二", "三", "四", "五", "六","日"],  
            daysMin:    ["日", "一", "二", "三", "四", "五", "六","日"],  
            months:     ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11","12"],  
            monthsShort:  ["一", "二", "三", "四", "五", "六", "七", "八", "九", "十", "十一", "十二"],  
            meridiem:    ["上午", "下午"],  
            //suffix:      ["st", "nd", "rd", "th"],  
            today:       "今天"  
    };   
	$('#timeStart_1').datetimepicker({
		language:  'zh',  
		autoclose:true,
		startView: 0,
	    format: 'hh:ii:00'
	});
	$('#timeEnd_1').datetimepicker({
		language:  'zh',  
		autoclose:true,
		startView: 0,
	    format: 'hh:ii:00'
	});
	$('#timePointStart').datetimepicker({
		language:  'zh',  
		autoclose:true,
		startView: 0,
	    format: 'hh:ii:00'
	});
	$('#timePointEnd').datetimepicker({
		language:  'zh',  
		autoclose:true,
		startView: 0,
	    format: 'hh:ii:00'
	});
	/*
		解决datetimepicker时间空间与表单验证控件的问题：选择完日期后，并不会正确校验该字段
		期望：日期选择插件关闭时，期望能够触发校验。
		解决方案：使用bootstrap-datepicker的hide方法。当日期选择框关闭时，执行刷新校验
		updateStatus方法的作用是更新给定字段的校验状态
		validateField方法的作用是触发给定字段的校验
	*/
	$('#date_1').datetimepicker({
		language:  'zh',  
		autoclose:true,
		startView: 2,
		minView: "month",
	    format: 'yyyy-mm-dd'
	}).on('hide',function(e){
		$('#workModelform').data('bootstrapValidator')
		.updateStatus('date','NOT_VALIDATED',null)
		.validateField('date');
	});
	$('#dateSearch').datetimepicker({
		language:  'zh',  
		autoclose:true,
		startView: 2,
		minView: "month",
	    format: 'yyyy-mm-dd'
	});
	$('#dateSearch2').datetimepicker({
		language:  'zh',  
		autoclose:true,
		startView: 2,
		minView: "month",
	    format: 'yyyy-mm-dd'
	});
	//导出数据到excel表格
	function exportExcel(){
		var url="${ctx}/ruag/eqminstruction/downExcel";
		window.open(url);
	}
 </script>
</body>
</html>